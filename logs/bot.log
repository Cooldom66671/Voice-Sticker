2025-06-04 13:33:02 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 13:33:02 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 13:33:41 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 13:33:43 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 13:33:43 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 13:33:43 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 13:33:43 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 13:33:43 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 13:33:43 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 13:33:43 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 13:34:42 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 13:34:43 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 13:34:43 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 13:34:43 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 13:34:43 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 13:34:43 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 13:34:43 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 13:34:43 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 13:36:28 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 13:36:28 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 13:36:57 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAIB9GhAIckhsAzup1-vzxmAIw_a7wYYAAJycwACCD8BSsrl9JyPmzKXNgQ.ogg
2025-06-04 13:36:57 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAIB9GhAIckhsAzup1-vzxmAIw_a7wYYAAJycwACCD8BSsrl9JyPmzKXNgQ.ogg в WAV
2025-06-04 13:37:06 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Собака в космосе (уверенность: 0.90)
2025-06-04 13:37:10 | INFO     | image_generation_service.service:_check_if_background_needed:154 | Background needed for prompt: Собака в космосе
2025-06-04 13:37:11 | ERROR    | image_generation_service.service:_enhance_with_gemini:216 | Gemini enhancement error: 400 User location is not supported for the API use.
2025-06-04 13:37:11 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: Собака в космосе, photorealistic, detailed, high quality, detailed environment, sticker design, high...
2025-06-04 13:37:11 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: True
2025-06-04 13:37:15 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.07s
2025-06-04 13:37:16 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:37:16 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:37:42 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 13:37:42 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 13:37:47 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 13:37:48 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 13:37:48 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 13:37:49 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 13:37:49 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 13:37:49 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 13:37:49 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 13:37:49 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 13:37:54 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 13:37:54 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 13:38:20 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAIB-mhAIhs5qOA09dTGHR-kJZyvkzXAAAJ5cwACCD8BStp8TnR6ohKzNgQ.ogg
2025-06-04 13:38:20 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAIB-mhAIhs5qOA09dTGHR-kJZyvkzXAAAJ5cwACCD8BStp8TnR6ohKzNgQ.ogg в WAV
2025-06-04 13:38:28 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Собака в космосе (уверенность: 0.90)
2025-06-04 13:38:35 | INFO     | image_generation_service.service:_check_if_background_needed:154 | Background needed for prompt: Собака в космосе
2025-06-04 13:38:37 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака в космосе -> A realistic-style Telegram sticker depicting a golden retriever astronaut, wearing a custom-fitted spacesuit with Russian lettering, gazing out the porthole of a Soyuz spacecraft.  The background is a detailed view of Earth, curving dramatically below, with the blackness of space and distant stars visible beyond.  The dog's expression is one of wonder and slight apprehension, its ears slightly perked. The sticker should be centrally composed and highly detailed, focusing on the dog's expressive face and the breathtaking view from the spacecraft, optimized for clear visibility at small sizes.
2025-06-04 13:38:37 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic-style Telegram sticker depicting a golden retriever astronaut, wearing a custom-fitted s...
2025-06-04 13:38:37 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: True
2025-06-04 13:38:40 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.69s
2025-06-04 13:38:41 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:38:42 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:38:51 | INFO     | telegram_sticker_manager:add_sticker_to_pack:178 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 13:38:51 | WARNING  | bot_handlers:cb_add_to_sticker_pack:852 | Cannot edit message: Telegram server says - Bad Request: message can't be edited
2025-06-04 13:39:14 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICA2hAIlF7TkV6XuHT0gaOXbq1CLu7AAKAcwACCD8BSlDCveTjdGTpNgQ.ogg
2025-06-04 13:39:14 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICA2hAIlF7TkV6XuHT0gaOXbq1CLu7AAKAcwACCD8BSlDCveTjdGTpNgQ.ogg в WAV
2025-06-04 13:39:22 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Злой бост, кушает (уверенность: 0.90)
2025-06-04 13:39:35 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICB2hAIme52mFObM5VzRPviR52cOGJAAKCcwACCD8BSvxfabq-BmISNgQ.ogg
2025-06-04 13:39:35 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICB2hAIme52mFObM5VzRPviR52cOGJAAKCcwACCD8BSvxfabq-BmISNgQ.ogg в WAV
2025-06-04 13:39:44 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Злой босс кушает бургер (уверенность: 0.90)
2025-06-04 13:39:50 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Злой босс кушает бургер -> A realistic, highly detailed illustration of an angry boss, meticulously rendered with sharp lines and realistic textures, furiously devouring a juicy cheeseburger.  His expression is one of intense frustration, brows furrowed, eyes narrowed.  He's wearing a crisp, slightly rumpled business suit. The burger is dripping with melted cheese and sauce.  Isolated on a pure white background.  The image is centered and optimized for a Telegram sticker, emphasizing clear, expressive features.
2025-06-04 13:39:50 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed illustration of an angry boss, meticulously rendered with sharp lines a...
2025-06-04 13:39:50 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 13:39:52 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.02s
2025-06-04 13:39:53 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:39:54 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:40:03 | INFO     | telegram_sticker_manager:add_sticker_to_pack:178 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 13:40:03 | WARNING  | bot_handlers:cb_add_to_sticker_pack:852 | Cannot edit message: Telegram server says - Bad Request: message can't be edited
2025-06-04 13:40:20 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICEGhAIpMz_aNmL5NydeZmXcZ12I8UAAKKcwACCD8BSimarpuNBSNfNgQ.ogg
2025-06-04 13:40:20 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICEGhAIpMz_aNmL5NydeZmXcZ12I8UAAKKcwACCD8BSimarpuNBSNfNgQ.ogg в WAV
2025-06-04 13:40:28 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Милый котик сидит на радуге (уверенность: 0.90)
2025-06-04 13:40:33 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Милый котик сидит на радуге -> A photorealistic rendering of an adorable fluffy ginger kitten with bright green eyes, sitting comfortably on a vibrant, slightly arched rainbow.  The kitten is looking directly at the viewer with a playful expression. Isolated on a pure white background.  The fur is meticulously detailed, showing individual strands.  The rainbow is brightly colored and sharply defined, with a slight blur effect at the edges for softness.  The image is centered and perfectly composed for a Telegram sticker,  emphasizing the kitten's cuteness and the rainbow's brilliance.
2025-06-04 13:40:33 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of an adorable fluffy ginger kitten with bright green eyes, sitting comfo...
2025-06-04 13:40:33 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 13:40:41 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 8.95s
2025-06-04 13:40:42 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:40:43 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:40:53 | INFO     | telegram_sticker_manager:add_sticker_to_pack:178 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 13:40:53 | WARNING  | bot_handlers:cb_add_to_sticker_pack:852 | Cannot edit message: Telegram server says - Bad Request: message can't be edited
2025-06-04 13:41:46 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICGGhAIujJ_n28tDCF_9WaSt5TVSGaAAKQcwACCD8BSiL3cIZWYPP4NgQ.ogg
2025-06-04 13:41:46 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICGGhAIujJ_n28tDCF_9WaSt5TVSGaAAKQcwACCD8BSiL3cIZWYPP4NgQ.ogg в WAV
2025-06-04 13:41:56 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Акс из дота 2 в боевой пользе (уверенность: 0.90)
2025-06-04 13:42:02 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Акс из дота 2 в боевой пользе -> A realistic-style Telegram sticker of a Dota 2 hero, in a dynamic battle pose, isolated on a white background.  The hero should be sharply focused and centrally positioned, showcasing detailed textures and lighting to emphasize their battle readiness.  The style should be hyperrealistic, with a focus on high-detail rendering of the character's armor, weapons, and facial expression.  The background should be pure white, with no shadows or environmental elements.
2025-06-04 13:42:02 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic-style Telegram sticker of a Dota 2 hero, in a dynamic battle pose, isolated on a white b...
2025-06-04 13:42:02 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 13:42:11 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 10.64s
2025-06-04 13:42:12 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:42:14 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:42:46 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICHGhAIyW4mqlthTU3-rbdczUjOe80AAKUcwACCD8BSpm8x-mjminiNgQ.ogg
2025-06-04 13:42:46 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICHGhAIyW4mqlthTU3-rbdczUjOe80AAKUcwACCD8BSpm8x-mjminiNgQ.ogg в WAV
2025-06-04 13:42:55 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Бутылка текилы на столе (уверенность: 0.90)
2025-06-04 13:42:59 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Бутылка текилы на столе -> A photorealistic rendering of a bottle of Jose Cuervo Especial tequila, meticulously detailed, sitting upright on a clean white surface. The bottle is slightly angled to the left, showcasing the label clearly.  The background is pure white, with no shadows or reflections.  The image is sharply focused and centered, optimized for a Telegram sticker.  The lighting is soft and even, emphasizing the texture of the glass and the label details.
2025-06-04 13:42:59 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a bottle of Jose Cuervo Especial tequila, meticulously detailed, sitti...
2025-06-04 13:42:59 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 13:43:03 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.65s
2025-06-04 13:43:04 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:43:04 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:43:18 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Бутылка текилы на столе -> A cute anime-style bottle of tequila, slightly tilted, sitting on a nonexistent white table.  The bottle should be detailed with vibrant, slightly exaggerated highlights and shadows, emphasizing its curves and label.  The label should feature stylized text in a playful font, possibly with a small, charming illustration. The tequila bottle is centered against a pure white background with no other elements.  Focus on clear lines and expressive, bright colors.
2025-06-04 13:43:18 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A cute anime-style bottle of tequila, slightly tilted, sitting on a nonexistent white table.  The bo...
2025-06-04 13:43:18 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: anime, Background needed: False
2025-06-04 13:43:25 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 7.80s
2025-06-04 13:43:26 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:43:26 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:47:55 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 13:47:55 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 13:48:01 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 13:48:02 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 13:48:02 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 13:48:03 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 13:48:03 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 13:48:03 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 13:48:03 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 13:48:03 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 13:48:09 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 13:48:09 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 13:48:20 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Чихуа-хуа играет с мячиком -> A realistically rendered, isolated Chihuahua puppy, with short, tan and white fur, playfully pouncing on a bright red, slightly fuzzy tennis ball.  The dog's ears are perked up, tongue slightly out, eyes bright and full of energy. White background.  Centered composition, optimized for sticker format.  High detail, sharp focus, expressive features.
2025-06-04 13:48:20 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistically rendered, isolated Chihuahua puppy, with short, tan and white fur, playfully pouncin...
2025-06-04 13:48:20 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 13:48:24 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.27s
2025-06-04 13:48:25 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:48:26 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:48:39 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Чихуа-хуа играет с мячиком -> A cute, chibi-style anime chihuahua with oversized, expressive eyes, wearing a tiny red collar, playfully pouncing on a bright yellow tennis ball.  The chihuahua is centered on a pure white background, isolated with no shadows or background elements.  The art style should be clean and simple, suitable for a Telegram sticker, emphasizing large, clear features for easy recognition. The chihuahua's fur should be a light brown, with slightly darker shading to define its features.  The overall expression should be joyful and energetic.
2025-06-04 13:48:39 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A cute, chibi-style anime chihuahua with oversized, expressive eyes, wearing a tiny red collar, play...
2025-06-04 13:48:39 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: anime, Background needed: False
2025-06-04 13:48:42 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 3.68s
2025-06-04 13:48:42 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:48:43 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:48:50 | INFO     | telegram_sticker_manager:add_sticker_to_pack:178 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 13:48:50 | WARNING  | bot_handlers:cb_add_to_sticker_pack:852 | Cannot edit message: Telegram server says - Bad Request: message can't be edited
2025-06-04 13:51:53 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Черно белая чихуахуа по имени коровка -> A realistic, highly detailed sticker of a black and white Chihuahua named Korovka, isolated on a pure white background.  The Chihuahua should be centered, facing slightly forward, with expressive eyes and a slightly tilted head.  Focus on rendering the texture of its fur –  the contrast between black and white should be sharp, showing individual hairs.  The image should be optimized for sticker use, with clear, clean lines and a vibrant, lifelike appearance.
2025-06-04 13:51:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed sticker of a black and white Chihuahua named Korovka, isolated on a pur...
2025-06-04 13:51:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 13:51:58 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.71s
2025-06-04 13:51:58 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 13:51:59 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 13:52:07 | INFO     | telegram_sticker_manager:add_sticker_to_pack:178 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 13:52:08 | WARNING  | bot_handlers:cb_add_to_sticker_pack:852 | Cannot edit message: Telegram server says - Bad Request: message can't be edited
2025-06-04 14:09:23 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 14:09:23 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 14:09:31 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 14:09:33 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 14:09:33 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 14:09:33 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 14:09:33 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 14:09:33 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 14:09:33 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 14:09:33 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 14:09:40 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 14:09:40 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 14:10:34 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICNWhAKarleKjaQhFqf0RkBu9-3DdqAALxcwACCD8BSiMmr-Cmoqf-NgQ.ogg
2025-06-04 14:10:34 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICNWhAKarleKjaQhFqf0RkBu9-3DdqAALxcwACCD8BSiMmr-Cmoqf-NgQ.ogg в WAV
2025-06-04 14:10:43 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Грустный котик под дождём (уверенность: 0.90)
2025-06-04 14:10:48 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Грустный котик под дождём -> A realistic rendering of a sad, tabby kitten, isolated on a white background.  The kitten is drenched in rain, its fur clinging wetly to its body. Its eyes are downcast and slightly watery.  The expression should be clearly melancholic but not aggressive.  The kitten is centered in the frame,  with high detail showing individual strands of wet fur and realistic textures. The background is pure white.
2025-06-04 14:10:48 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic rendering of a sad, tabby kitten, isolated on a white background.  The kitten is drenche...
2025-06-04 14:10:48 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 14:10:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 6.70s
2025-06-04 14:10:53 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 14:10:54 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 14:11:04 | INFO     | telegram_sticker_manager:add_sticker_to_pack:178 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 14:13:46 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Грустный котик мокнет под дождем -> Anime style sticker: A sad, fluffy grey kitten, with large, expressive, downcast anime eyes and slightly droopy ears, soaked to the bone from the rain.  Water droplets cling to its fur.  White background, isolated, centered.  Focus on emotional expressiveness;  use soft, slightly muted colors.
2025-06-04 14:13:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: Anime style sticker: A sad, fluffy grey kitten, with large, expressive, downcast anime eyes and slig...
2025-06-04 14:13:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: anime, Background needed: False
2025-06-04 14:13:49 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.05s
2025-06-04 14:13:50 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 14:13:50 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 14:13:58 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Грустный котик мокнет под дождем -> A realistic illustration of a sad, fluffy grey tabby kitten, completely drenched in rain, with water droplets clinging to its fur and whiskers.  Its ears are drooped, and its expression is forlorn. The kitten is centered on a pure white background, isolated with no other elements.  The style should be photorealistic, with attention to detail in the fur texture, water droplets' reflectivity, and the subtle shine on the wet fur. The image should be optimized for a Telegram sticker, with clear outlines and a strong, expressive composition.
2025-06-04 14:13:58 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic illustration of a sad, fluffy grey tabby kitten, completely drenched in rain, with water...
2025-06-04 14:13:58 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 14:14:01 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.07s
2025-06-04 14:14:01 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 14:14:02 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 14:14:10 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: Грустный котик мокнет под дождем, kawaii, chibi, adorable, big eyes, cute style, white background, i...
2025-06-04 14:14:10 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: cute, Background needed: False
2025-06-04 14:14:18 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 8.20s
2025-06-04 14:14:19 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 14:14:19 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 14:14:25 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: Грустный котик мокнет под дождем, pixel art, 8-bit, retro game style, pixelated, white background, i...
2025-06-04 14:14:25 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: pixel, Background needed: False
2025-06-04 14:14:28 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 3.08s
2025-06-04 14:14:28 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 14:14:29 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 14:22:42 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 14:22:42 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 14:22:49 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 14:22:50 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 14:22:50 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 14:22:52 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 14:22:52 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 14:22:52 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 14:22:52 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 14:22:52 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 14:22:57 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 14:22:57 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 14:23:15 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICR2hALKK0UsEHu99VFNZv6qbNh7spAAIQdAACCD8BSq_gvkGZUxY7NgQ.ogg
2025-06-04 14:23:15 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_7945261060_AwACAgIAAxkBAAICR2hALKK0UsEHu99VFNZv6qbNh7spAAIQdAACCD8BSq_gvkGZUxY7NgQ.ogg в WAV
2025-06-04 14:23:27 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Снег-котик стоит под дождём и на него капают капли дождя (уверенность: 0.90)
2025-06-04 14:23:37 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Снег-котик стоит под дождём и на него капают капли дождя -> A realistic illustration of a fluffy white cat, breed similar to a Siberian or Maine Coon, standing on a white background.  The cat is slightly hunched, looking slightly forlorn. Large, realistically rendered raindrops are falling onto its thick fur, clinging to individual strands. The fur is meticulously detailed, showing texture and the way water beads on it. The cat is centered in the frame, isolated on the pure white background, with no other elements present.  The expression on the cat's face is slightly melancholic, its eyes slightly downcast.  The overall lighting is soft and diffused.
2025-06-04 14:23:37 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic illustration of a fluffy white cat, breed similar to a Siberian or Maine Coon, standing ...
2025-06-04 14:23:37 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 14:23:45 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 9.70s
2025-06-04 14:23:45 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 14:23:46 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 14:23:58 | INFO     | telegram_sticker_manager:add_sticker_to_pack:226 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 14:23:58 | INFO     | telegram_sticker_manager:get_or_create_user_pack:276 | Added sticker to existing pack: pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 14:28:31 | INFO     | telegram_sticker_manager:add_sticker_to_pack:226 | Added sticker to pack pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 14:28:31 | INFO     | telegram_sticker_manager:get_or_create_user_pack:276 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 14:38:13 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_184115764_AwACAgIAAxkBAAICVmhAMCTHc5PGJtGlxSkohfeJdF9fAAK7iQACo0MAAUoS8NBHy06KHjYE.ogg
2025-06-04 14:38:13 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_184115764_AwACAgIAAxkBAAICVmhAMCTHc5PGJtGlxSkohfeJdF9fAAK7iQACo0MAAUoS8NBHy06KHjYE.ogg в WAV
2025-06-04 14:38:35 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Злой, крокодила, бомбардира, бомбит детей газы, а внизу стикера должна быть подпись «Антон» (уверенность: 0.90)
2025-06-04 14:38:47 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Злой, крокодила, бомбардира, бомбит детей газы, а внизу стикера должна быть подпись «Антон» -> Create a Telegram sticker in anime style.  The sticker features an angry crocodile bombardier, depicted in a chibi style with exaggerated features,  dropping gas bombs on a group of small, cartoonish children.  The crocodile should be vividly colored, with sharp teeth and intensely furious eyes.  The children should be clearly identifiable as children, but small and simplified for comedic effect. The background is pure white, with the crocodile and children isolated and centered.  At the bottom of the sticker, clearly legible in a stylized anime font, is the signature: "Антон".  The overall style should be expressive and cartoonish, suitable for use as a humorous Telegram sticker.  Ensure the sticker is optimized for clarity and impact within the Telegram sticker format.
2025-06-04 14:38:47 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: Create a Telegram sticker in anime style.  The sticker features an angry crocodile bombardier, depic...
2025-06-04 14:38:47 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: anime, Background needed: False
2025-06-04 14:38:50 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.19s
2025-06-04 14:38:51 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 14:38:51 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 14:42:51 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_184115764_AwACAgIAAxkBAAICW2hAMTqYujqW3rb6f_Wtf-690OscAALFiQACo0MAAUrjeuvjw2aQQTYE.ogg
2025-06-04 14:42:51 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_184115764_AwACAgIAAxkBAAICW2hAMTqYujqW3rb6f_Wtf-690OscAALFiQACo0MAAUrjeuvjw2aQQTYE.ogg в WAV
2025-06-04 14:43:09 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Мэл строй держит девушку за спасательный круг, который у неё вместо живота, а внизу подписано «Привет» (уверенность: 0.85)
2025-06-04 14:43:29 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Мэл строй держит девушку за спасательный круг, который у неё вместо живота, а внизу подписано «Привет» -> A realistic-style Telegram sticker on a white background, showing Mel Strong's hands gently gripping a life preserver that replaces a young woman's abdomen. The woman's expression should be a mix of surprise and amusement.  Mel's expression should be kind and slightly playful. The life preserver should be bright orange, slightly deflated, showing subtle wrinkles.  The woman's skin should have a healthy glow. The text "Привет" (Privet) is written neatly below in a simple, sans-serif font.  The sticker is centered, with ample white space around the characters for optimal sticker format.  High detail rendering focusing on skin textures and the life preserver's material is required.  The overall style should evoke a humorous and slightly surreal feel.
2025-06-04 14:43:29 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic-style Telegram sticker on a white background, showing Mel Strong's hands gently gripping...
2025-06-04 14:43:29 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 14:43:32 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.84s
2025-06-04 14:43:33 | INFO     | sticker_utils.utils:process_sticker:75 | Sticker processed successfully, size: (512, 512)
2025-06-04 14:43:34 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 14:55:09 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 14:55:09 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 15:08:22 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 15:08:24 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 15:08:24 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 15:08:25 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 15:08:25 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 15:08:25 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 15:08:25 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 15:08:25 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 15:08:31 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 15:08:31 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 15:09:19 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Милый кот -> A photorealistic rendering of an adorable, fluffy ginger kitten with bright green eyes, sitting upright and looking directly at the viewer with a slightly curious expression.  The kitten is isolated on a pure white background, centered in the frame. The fur texture should be highly detailed, showing individual strands and highlights.  The overall image should be sharply focused and optimized for a Telegram sticker, conveying a sense of warmth and playfulness.
2025-06-04 15:09:19 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of an adorable, fluffy ginger kitten with bright green eyes, sitting upri...
2025-06-04 15:09:19 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:09:23 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.01s
2025-06-04 15:09:24 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Gavno...' added to sticker at position: center
2025-06-04 15:09:24 | INFO     | sticker_utils.utils:process_sticker:232 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:09:25 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:11:14 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собачка -> A photorealistic rendering of a cute, fluffy small dog, possibly a puppy, breed unspecified, looking directly at the camera with expressive eyes.  The dog is isolated on a pure white background, centered in the frame.  The fur is detailed and highly textured, showing individual strands. The image is sharply focused and brightly lit, optimized for sticker use with a playful, slightly cartoonish exaggeration of its features for maximum expressiveness.
2025-06-04 15:11:14 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a cute, fluffy small dog, possibly a puppy, breed unspecified, looking...
2025-06-04 15:11:14 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:11:17 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.45s
2025-06-04 15:11:19 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Anton pido...' added to sticker at position: bottom
2025-06-04 15:11:19 | INFO     | sticker_utils.utils:process_sticker:232 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:11:20 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:19:43 | INFO     | stt_service.service:_transcribe_whisper_optimized:166 | Распознаем аудио: /Users/cooldom/VoiceSticker/storage/voice_184115764_AwACAgIAAxkBAAICb2hAOd2ibkTBJhiYFI_uVDu0CfqwAAJIigACo0MAAUrVnw9_2VGYjjYE.ogg
2025-06-04 15:19:43 | INFO     | stt_service.service:_convert_to_wav:372 | Конвертируем /Users/cooldom/VoiceSticker/storage/voice_184115764_AwACAgIAAxkBAAICb2hAOd2ibkTBJhiYFI_uVDu0CfqwAAJIigACo0MAAUrVnw9_2VGYjjYE.ogg в WAV
2025-06-04 15:20:05 | INFO     | stt_service.service:_transcribe_whisper_optimized:231 | Распознан текст: Балерина Капучино Стоит в подворотне и копается в мусорке Подпись внизу. Антон (уверенность: 0.90)
2025-06-04 15:20:52 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Балерина Капучино Стоит в подворотне и копается в мусорке Подпись внизу. Антон -> A realistic-style illustration of a ballerina, dressed in a slightly tattered, coffee-stained white tutu and pointe shoes, standing in a centered pose against a pure white background.  Her expression is a mix of weariness and determination as she rummages through a slightly overflowing, realistically depicted dumpster.  Her hair is messy, possibly pulled back haphazardly.  The focus is sharp on her, isolated from any background.  The sticker should be optimized for clear visibility and expressive impact, with a subtle shadow underneath her to suggest depth.  Signature "Anton" in a small, discreet font at the very bottom center.
2025-06-04 15:20:52 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic-style illustration of a ballerina, dressed in a slightly tattered, coffee-stained white ...
2025-06-04 15:20:52 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:20:55 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.61s
2025-06-04 15:20:56 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 15:20:56 | INFO     | sticker_utils.utils:process_sticker:232 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:20:57 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:22:06 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 15:22:06 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 15:22:14 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 15:22:15 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 15:22:15 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 15:22:15 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 15:22:15 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 15:22:15 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 15:22:15 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 15:22:15 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 15:22:21 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 15:22:21 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 15:22:52 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собачка -> A photorealistic rendering of a small, fluffy brown and white puppy,  sitting upright with its ears perked up, looking directly at the camera with a playful expression.  Isolated on a pure white background.  The puppy should be sharply focused, with realistic fur detail and sparkling eyes.  Centered composition, optimized for Telegram sticker format.
2025-06-04 15:22:52 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a small, fluffy brown and white puppy,  sitting upright with its ears ...
2025-06-04 15:22:52 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:22:56 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.65s
2025-06-04 15:22:57 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 15:22:57 | INFO     | sticker_utils.utils:process_sticker:232 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:22:57 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 102
2025-06-04 15:22:57 | INFO     | bot_handlers:generate_final_sticker:698 | Sticker saved with ID: 102 for user: 7148908811
2025-06-04 15:22:57 | INFO     | bot_handlers:generate_final_sticker:724 | Sending sticker with ID: 102
2025-06-04 15:22:57 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 102
2025-06-04 15:22:58 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:23:03 | INFO     | bot_handlers:cb_add_to_sticker_pack:1026 | Adding sticker to pack - ID: 102, User: 7945261060
2025-06-04 15:23:03 | INFO     | bot_handlers:cb_add_to_sticker_pack:1035 | Sticker found - Owner: 7148908811, Requester: 7945261060
2025-06-04 15:23:08 | INFO     | bot_handlers:cb_add_to_sticker_pack:1026 | Adding sticker to pack - ID: 102, User: 7945261060
2025-06-04 15:23:08 | INFO     | bot_handlers:cb_add_to_sticker_pack:1035 | Sticker found - Owner: 7148908811, Requester: 7945261060
2025-06-04 15:27:18 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 15:27:18 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 15:27:24 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 15:27:25 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 15:27:25 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 15:27:26 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 15:27:26 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 15:27:26 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 15:27:26 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 15:27:26 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 15:27:31 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 15:27:31 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 15:27:39 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 102, User: 7945261060
2025-06-04 15:27:39 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 7148908811, Requester: 7945261060
2025-06-04 15:27:55 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 15:27:57 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака -> A photorealistic sticker of a Golden Retriever puppy, approximately 6 months old, sitting with its head slightly tilted, looking directly at the viewer with bright, expressive eyes.  The puppy is isolated on a pure white background, centered in the frame, showing its full body from head to paws.  The fur is detailed with individual strands visible, showing a glossy sheen. The image should be sharply focused and optimized for Telegram sticker format with a square aspect ratio.
2025-06-04 15:27:57 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic sticker of a Golden Retriever puppy, approximately 6 months old, sitting with its h...
2025-06-04 15:27:57 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:28:12 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 16.90s
2025-06-04 15:28:14 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон хуй...' added to sticker at position: bottom
2025-06-04 15:28:14 | INFO     | sticker_utils.utils:process_sticker:232 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:28:14 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 103
2025-06-04 15:28:14 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 103 for user: 7945261060
2025-06-04 15:28:15 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 103
2025-06-04 15:28:15 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 103
2025-06-04 15:28:16 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:28:20 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 103, User: 7945261060
2025-06-04 15:28:20 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 7945261060, Requester: 7945261060
2025-06-04 15:28:22 | INFO     | telegram_sticker_manager:add_sticker_to_pack:226 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 15:28:22 | INFO     | telegram_sticker_manager:get_or_create_user_pack:276 | Added sticker to existing pack: pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 15:30:02 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 15:30:03 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака -> A photorealistic sticker of a Golden Retriever puppy, approximately 6 months old, sitting with its ears slightly flopped, looking directly at the viewer with a playful expression.  The puppy is isolated on a pure white background, centered in the frame, with sharp focus and high detail on its fur. The lighting is soft and even, emphasizing the texture of its fur.  The sticker should be optimized for clear visibility at small sizes.
2025-06-04 15:30:03 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic sticker of a Golden Retriever puppy, approximately 6 months old, sitting with its e...
2025-06-04 15:30:03 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:30:06 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.22s
2025-06-04 15:30:07 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон жижа...' added to sticker at position: bottom
2025-06-04 15:30:07 | INFO     | sticker_utils.utils:process_sticker:232 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:30:07 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 104
2025-06-04 15:30:07 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 104 for user: 413686584
2025-06-04 15:30:07 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 104
2025-06-04 15:30:07 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 104
2025-06-04 15:30:08 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:30:31 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 15:30:32 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака -> A cute anime-style Shiba Inu puppy, sitting, looking directly at the viewer with big, expressive eyes,  brightly colored,  detailed fur,  on a pure white background, isolated,  centered,  suitable for a Telegram sticker.
2025-06-04 15:30:32 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A cute anime-style Shiba Inu puppy, sitting, looking directly at the viewer with big, expressive eye...
2025-06-04 15:30:32 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: anime, Background needed: False
2025-06-04 15:30:36 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.45s
2025-06-04 15:30:37 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон жижа...' added to sticker at position: bottom
2025-06-04 15:30:37 | INFO     | sticker_utils.utils:process_sticker:232 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:30:37 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 105
2025-06-04 15:30:37 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 105 for user: 413686584
2025-06-04 15:30:37 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 105
2025-06-04 15:30:37 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 105
2025-06-04 15:30:37 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:30:43 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 105, User: 413686584
2025-06-04 15:30:43 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 15:30:44 | INFO     | telegram_sticker_manager:add_sticker_to_pack:226 | Added sticker to pack pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 15:30:44 | INFO     | telegram_sticker_manager:get_or_create_user_pack:276 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 15:32:55 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 15:32:56 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Обезьяна -> A realistic, highly detailed rendering of a playful chimpanzee, isolated on a pure white background.  The chimpanzee should be centered, looking directly at the viewer with a mischievous expression, showcasing its fur texture and subtle muscle definition.  The image should be optimized for sticker use, with a clear outline and vibrant colors.
2025-06-04 15:32:56 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed rendering of a playful chimpanzee, isolated on a pure white background....
2025-06-04 15:32:56 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:32:59 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.15s
2025-06-04 15:33:00 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антоха...' added to sticker at position: bottom
2025-06-04 15:33:00 | INFO     | sticker_utils.utils:process_sticker:232 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:33:00 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 106
2025-06-04 15:33:00 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 106 for user: 413686584
2025-06-04 15:33:00 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 106
2025-06-04 15:33:00 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 106
2025-06-04 15:33:01 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:33:06 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 106, User: 413686584
2025-06-04 15:33:06 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 15:33:08 | INFO     | telegram_sticker_manager:add_sticker_to_pack:226 | Added sticker to pack pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 15:33:08 | INFO     | telegram_sticker_manager:get_or_create_user_pack:276 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 15:44:15 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 15:44:15 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 15:44:21 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 15:44:23 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 15:52:22 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 15:52:24 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 15:52:24 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 15:52:25 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 15:52:25 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 15:52:25 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 15:52:25 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 15:52:25 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 15:52:31 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 15:52:31 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 15:52:48 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 15:52:49 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака -> A photorealistic illustration of a Golden Retriever puppy, sitting, looking directly at the viewer with bright, expressive eyes, on a pure white background.  The puppy should be sharply focused and well-lit, isolated from any background elements. The fur should be meticulously detailed, showing individual strands and highlights.  The image should be centered and optimized for use as a Telegram sticker, conveying a sense of playful energy.
2025-06-04 15:52:49 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic illustration of a Golden Retriever puppy, sitting, looking directly at the viewer w...
2025-06-04 15:52:49 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:52:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.33s
2025-06-04 15:52:54 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон ганд...' added to sticker at position: bottom
2025-06-04 15:52:54 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:52:55 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:208 | Prepared sticker for Telegram: 170889 bytes, has_transparency: True
2025-06-04 15:52:55 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 107
2025-06-04 15:52:55 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 107 for user: 7945261060
2025-06-04 15:52:55 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 107
2025-06-04 15:52:55 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 107
2025-06-04 15:52:56 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:52:59 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 107, User: 7945261060
2025-06-04 15:52:59 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 7945261060, Requester: 7945261060
2025-06-04 15:53:00 | INFO     | telegram_sticker_manager:prepare_sticker_file:126 | Prepared sticker for Telegram: 170889 bytes
2025-06-04 15:53:01 | INFO     | telegram_sticker_manager:add_sticker_to_pack:237 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 15:53:01 | INFO     | telegram_sticker_manager:get_or_create_user_pack:287 | Added sticker to existing pack: pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 15:54:15 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 15:54:16 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака милая без фона -> A photorealistic sticker of an adorable, fluffy dog, isolated on a pure white background.  The dog should be centered, sharply focused, and expressively posed, showcasing its cuteness.  Think of a high-quality, studio-style photograph with soft, natural lighting, emphasizing the dog's fur texture and adorable features.  No background elements or shadows.
2025-06-04 15:54:16 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic sticker of an adorable, fluffy dog, isolated on a pure white background.  The dog s...
2025-06-04 15:54:16 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:54:20 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.48s
2025-06-04 15:54:22 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'ААА...' added to sticker at position: bottom
2025-06-04 15:54:22 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 15:54:23 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:208 | Prepared sticker for Telegram: 261452 bytes, has_transparency: True
2025-06-04 15:54:23 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 108
2025-06-04 15:54:23 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 108 for user: 7945261060
2025-06-04 15:54:23 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 108
2025-06-04 15:54:23 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 108
2025-06-04 15:54:23 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:54:38 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 15:54:39 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Котик -> A realistic, highly detailed illustration of a cute, fluffy ginger tabby kitten, looking directly at the camera with expressive green eyes.  The kitten is centered on a pure white background, isolated with no shadows or background elements.  The fur is meticulously rendered, showing individual strands and texture.  The expression is playful and endearing. Optimized for Telegram sticker format.
2025-06-04 15:54:39 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed illustration of a cute, fluffy ginger tabby kitten, looking directly at...
2025-06-04 15:54:39 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:54:42 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 3.57s
2025-06-04 15:54:42 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 15:54:43 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:208 | Prepared sticker for Telegram: 197405 bytes, has_transparency: True
2025-06-04 15:54:43 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 109
2025-06-04 15:54:43 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 109 for user: 7945261060
2025-06-04 15:54:43 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 109
2025-06-04 15:54:43 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 109
2025-06-04 15:54:44 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:57:43 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 15:57:43 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: Котик, cartoon style, flat colors, simple design, cute, kawaii, white background, isolated character...
2025-06-04 15:57:43 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: cartoon, Background needed: False
2025-06-04 15:57:47 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 3.92s
2025-06-04 15:57:47 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 15:57:48 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:208 | Prepared sticker for Telegram: 171706 bytes, has_transparency: True
2025-06-04 15:57:48 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 110
2025-06-04 15:57:48 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 110 for user: 7945261060
2025-06-04 15:57:48 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 110
2025-06-04 15:57:48 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 110
2025-06-04 15:57:49 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:57:55 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 15:57:57 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Котик -> A realistic, photorealistic rendering of a charming tabby cat,  centered on a pure white background with no shadows or background elements. The cat should have expressive, bright eyes and be looking directly at the viewer.  The fur should be meticulously detailed, showing individual strands and texture. The cat should be isolated on the white background, leaving a clear, clean outline suitable for a Telegram sticker.  The overall expression should be friendly and slightly playful.
2025-06-04 15:57:57 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, photorealistic rendering of a charming tabby cat,  centered on a pure white background ...
2025-06-04 15:57:57 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:58:00 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.32s
2025-06-04 15:58:00 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 15:58:01 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:208 | Prepared sticker for Telegram: 221492 bytes, has_transparency: True
2025-06-04 15:58:01 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 111
2025-06-04 15:58:01 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 111 for user: 7945261060
2025-06-04 15:58:01 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 111
2025-06-04 15:58:01 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 111
2025-06-04 15:58:02 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:58:28 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 15:58:28 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 15:58:34 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 15:58:35 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 15:58:35 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 15:58:36 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 15:58:36 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 15:58:36 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 15:58:36 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 15:58:36 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 15:58:42 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 15:58:42 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 15:59:12 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 15:59:14 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Котик -> A realistic, photorealistic rendering of a cute, fluffy kitten,  ginger tabby with bright green eyes,  looking directly at the camera with a playful expression.  The kitten is centered on a pure white background, isolated with no shadows or background elements. The fur texture is highly detailed, showing individual strands. The image is optimized for a Telegram sticker,  bright, sharp, and expressive.
2025-06-04 15:59:14 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, photorealistic rendering of a cute, fluffy kitten,  ginger tabby with bright green eyes...
2025-06-04 15:59:14 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 15:59:18 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.05s
2025-06-04 15:59:18 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 15:59:19 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:208 | Prepared sticker for Telegram: 244694 bytes, has_transparency: True
2025-06-04 15:59:19 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 112
2025-06-04 15:59:19 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 112 for user: 7945261060
2025-06-04 15:59:19 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 112
2025-06-04 15:59:19 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 112
2025-06-04 15:59:20 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 15:59:26 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 15:59:26 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:00:22 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:00:24 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:00:24 | WARNING  | sticker_utils.utils:<module>:392 | rembg not installed, background removal will be limited
2025-06-04 16:00:24 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:00:24 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:00:24 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:00:24 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:00:24 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:00:24 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:00:32 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:00:32 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:01:24 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:01:24 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:01:41 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:01:42 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:01:42 | WARNING  | sticker_utils.utils:<module>:392 | rembg not installed, background removal will be limited
2025-06-04 16:01:42 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:01:43 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:01:43 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:01:43 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:01:43 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:01:43 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:01:48 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:01:48 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:01:50 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:01:50 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:02:00 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:02:01 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:02:01 | WARNING  | sticker_utils.utils:<module>:392 | rembg not installed, background removal will be limited
2025-06-04 16:02:01 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:02:02 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:02:02 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:02:02 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:02:02 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:02:02 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:02:08 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:02:08 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:02:14 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 16:02:16 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Котик -> A realistic, highly detailed illustration of a fluffy ginger tabby kitten,  sitting upright and looking directly at the viewer with bright, curious eyes.  The kitten is isolated on a pure white background, centered in the frame. The fur should be meticulously rendered, showing individual strands and texture.  The expression should be playful and slightly mischievous.  The image should be optimized for Telegram sticker format, ensuring clarity and high visual impact.
2025-06-04 16:02:16 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed illustration of a fluffy ginger tabby kitten,  sitting upright and look...
2025-06-04 16:02:16 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:02:19 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.45s
2025-06-04 16:02:20 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 16:02:20 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 198126 bytes
2025-06-04 16:02:20 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 113
2025-06-04 16:02:20 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 113 for user: 7945261060
2025-06-04 16:02:21 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 113
2025-06-04 16:02:21 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 113
2025-06-04 16:02:21 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:02:30 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 113, User: 7945261060
2025-06-04 16:02:30 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 7945261060, Requester: 7945261060
2025-06-04 16:02:31 | INFO     | telegram_sticker_manager:prepare_sticker_file:126 | Prepared sticker for Telegram: 198126 bytes
2025-06-04 16:02:32 | INFO     | telegram_sticker_manager:add_sticker_to_pack:237 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 16:02:32 | INFO     | telegram_sticker_manager:get_or_create_user_pack:287 | Added sticker to existing pack: pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 16:03:01 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 16:03:01 | INFO     | image_generation_service.service:_check_if_background_needed:154 | Background needed for prompt: Собака с косточкой в космосе
2025-06-04 16:03:02 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака с косточкой в космосе -> A realistically rendered sticker featuring a Golden Retriever puppy playfully gnawing on a large, meaty bone, floating in the inky blackness of outer space.  The puppy is positioned slightly off-center, looking directly at the viewer with bright, curious eyes.  Detailed nebulae swirl in the background, painted with vibrant blues, purples, and pinks.  Stars twinkle realistically, creating a sense of depth. The bone is rendered with glistening saliva and realistic textures. The puppy's fur is meticulously detailed, showing individual strands and highlights.  The overall style should be photorealistic, with a slightly exaggerated, cute expression on the puppy's face to enhance its appeal as a sticker.
2025-06-04 16:03:02 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistically rendered sticker featuring a Golden Retriever puppy playfully gnawing on a large, me...
2025-06-04 16:03:02 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: True
2025-06-04 16:03:06 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.38s
2025-06-04 16:03:08 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 16:03:08 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:03:09 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 259100 bytes
2025-06-04 16:03:09 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 114
2025-06-04 16:03:09 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 114 for user: 7945261060
2025-06-04 16:03:09 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 114
2025-06-04 16:03:09 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 114
2025-06-04 16:03:10 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:03:35 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 16:03:36 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака с косточкой -> A photorealistic rendering of a Golden Retriever puppy, approximately 6 months old, happily gnawing on a large, juicy bone.  The puppy is centered, isolated on a pure white background, with fur details meticulously rendered, showing individual strands and highlights.  The bone should be a light brown, slightly meaty, with visible textures. The expression on the puppy's face should be one of pure joyful contentment. The image should be optimized for Telegram sticker format, ensuring clarity and expressiveness even at smaller sizes.
2025-06-04 16:03:36 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a Golden Retriever puppy, approximately 6 months old, happily gnawing ...
2025-06-04 16:03:36 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:04:14 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:04:14 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:04:32 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:04:34 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:04:34 | WARNING  | sticker_utils.utils:<module>:392 | rembg not installed, background removal will be limited
2025-06-04 16:04:34 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:04:35 | ERROR    | __main__:main:101 | Критическая ошибка: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Connection reset by peer]
2025-06-04 16:04:35 | ERROR    | __main__:<module>:120 | Неожиданная ошибка: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Connection reset by peer]
2025-06-04 16:04:48 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:04:49 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:04:49 | WARNING  | sticker_utils.utils:<module>:392 | rembg not installed, background removal will be limited
2025-06-04 16:04:49 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:04:49 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:04:49 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:04:49 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:04:49 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:04:49 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:04:55 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:04:55 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:05:15 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 16:05:17 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака с косточкой -> A realistic illustration of a happy Golden Retriever puppy, approximately 6 months old, gnawing on a large, juicy bone. The dog's fur should be detailed, showing individual strands and highlights. The bone should be realistically rendered with textures and subtle shadows.  The puppy should be centered on a pure white background with no shadows or background elements. The expression on the dog's face should be one of pure joyful contentment.  The image should be optimized for a Telegram sticker, ensuring a clear and expressive composition.
2025-06-04 16:05:17 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic illustration of a happy Golden Retriever puppy, approximately 6 months old, gnawing on a...
2025-06-04 16:05:17 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:05:20 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.96s
2025-06-04 16:05:22 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: top
2025-06-04 16:05:22 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:05:23 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 335763 bytes
2025-06-04 16:05:23 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 115
2025-06-04 16:05:23 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 115 for user: 7945261060
2025-06-04 16:05:23 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 115
2025-06-04 16:05:23 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 115
2025-06-04 16:05:24 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:05:36 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 115, User: 7945261060
2025-06-04 16:05:36 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 7945261060, Requester: 7945261060
2025-06-04 16:05:37 | INFO     | telegram_sticker_manager:prepare_sticker_file:126 | Prepared sticker for Telegram: 335763 bytes
2025-06-04 16:05:38 | INFO     | telegram_sticker_manager:add_sticker_to_pack:237 | Added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 16:05:38 | INFO     | telegram_sticker_manager:get_or_create_user_pack:287 | Added sticker to existing pack: pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 16:21:22 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 184115764
2025-06-04 16:21:22 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: Балерина Капучино Стоит в подворотне и копается в мусорке Подпись внизу. Антон, kawaii, chibi, adora...
2025-06-04 16:21:22 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: cute, Background needed: False
2025-06-04 16:21:32 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 10.54s
2025-06-04 16:21:33 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 16:21:33 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:21:34 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 201798 bytes
2025-06-04 16:21:34 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 116
2025-06-04 16:21:34 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 116 for user: 184115764
2025-06-04 16:21:34 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 116
2025-06-04 16:21:34 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 116
2025-06-04 16:21:35 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:25:13 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 184115764
2025-06-04 16:25:15 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Тун тун тун сахур шплёхает бочку с компотом -> A realistic-style Telegram sticker on a pure white background, showing a chubby, mischievous-looking Thun Thun Thun (a cartoon character, if applicable, otherwise a generic chubby figure) gleefully splashing a large, wooden barrel overflowing with glistening, ruby-red compote.  The compote should have visible fruit pieces (cherries, plums etc.). Thun Thun should be depicted mid-splash, with droplets of compote flying outwards, capturing a dynamic moment. The barrel should be slightly aged and show signs of wear. The focus should be sharp and centered, with high detail on Thun Thun's expression and the compote's texture.  The overall style should evoke a sense of playful chaos.
2025-06-04 16:25:15 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic-style Telegram sticker on a pure white background, showing a chubby, mischievous-looking...
2025-06-04 16:25:15 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:25:18 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.64s
2025-06-04 16:25:19 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Тонировка...' added to sticker at position: bottom
2025-06-04 16:25:19 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:25:19 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 154148 bytes
2025-06-04 16:25:19 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 117
2025-06-04 16:25:19 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 117 for user: 184115764
2025-06-04 16:25:20 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 117
2025-06-04 16:25:20 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 117
2025-06-04 16:25:20 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:25:26 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 117, User: 184115764
2025-06-04 16:25:26 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 184115764, Requester: 184115764
2025-06-04 16:25:31 | INFO     | telegram_sticker_manager:prepare_sticker_file:126 | Prepared sticker for Telegram: 154148 bytes
2025-06-04 16:25:31 | INFO     | telegram_sticker_manager:create_sticker_pack:179 | Created sticker pack aleksandr_stickers_by_Voice_Stiker_Bot for user 184115764
2025-06-04 16:27:34 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:27:35 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Песик -> A realistic, highly detailed rendering of a small, fluffy dog, breed unspecified, with expressive eyes, slightly tilted head, and a playful expression.  The dog is positioned centrally against a pure white background, isolated with no shadows or environment.  The style should be photorealistic, with attention to individual hairs and textures, aiming for a cute and appealing sticker format.  The image should be sharply focused and well-lit for optimal clarity.
2025-06-04 16:27:35 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed rendering of a small, fluffy dog, breed unspecified, with expressive ey...
2025-06-04 16:27:35 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:27:38 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.01s
2025-06-04 16:27:39 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Писька...' added to sticker at position: bottom
2025-06-04 16:27:39 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:27:39 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 157836 bytes
2025-06-04 16:27:39 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 118
2025-06-04 16:27:39 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 118 for user: 413686584
2025-06-04 16:27:39 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 184115764
2025-06-04 16:27:40 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 118
2025-06-04 16:27:40 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 118
2025-06-04 16:27:40 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:27:41 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинокрыл летит над копателями чёрного моря -> A realistic illustration of a Swinokryl (a fantastical creature resembling a pig with wings) in flight, viewed from a slightly low angle, against a pure white background.  The Swinokryl should be sharply focused and centrally positioned, exhibiting detailed musculature, feathers (if applicable), and expressive features.  The creature's wings should be outstretched, conveying a sense of dynamic motion.  Its fur/skin should have a slightly wet, glistening appearance, suggesting recent contact with water. Isolated object, no background elements.
2025-06-04 16:27:41 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic illustration of a Swinokryl (a fantastical creature resembling a pig with wings) in flig...
2025-06-04 16:27:41 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:27:43 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 3.96s
2025-06-04 16:27:44 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Потужный м...' added to sticker at position: bottom
2025-06-04 16:27:44 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:27:45 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 126260 bytes
2025-06-04 16:27:45 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 119
2025-06-04 16:27:45 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 119 for user: 184115764
2025-06-04 16:27:45 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 119
2025-06-04 16:27:45 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 119
2025-06-04 16:27:45 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:27:51 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 119, User: 184115764
2025-06-04 16:27:51 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 184115764, Requester: 184115764
2025-06-04 16:27:51 | INFO     | telegram_sticker_manager:prepare_sticker_file:126 | Prepared sticker for Telegram: 126260 bytes
2025-06-04 16:27:52 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 118, User: 413686584
2025-06-04 16:27:52 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 16:27:52 | INFO     | telegram_sticker_manager:add_sticker_to_pack:237 | Added sticker to pack aleksandr_stickers_by_Voice_Stiker_Bot
2025-06-04 16:27:52 | INFO     | telegram_sticker_manager:get_or_create_user_pack:287 | Added sticker to existing pack: aleksandr_stickers_by_Voice_Stiker_Bot
2025-06-04 16:27:53 | INFO     | telegram_sticker_manager:prepare_sticker_file:126 | Prepared sticker for Telegram: 157836 bytes
2025-06-04 16:27:53 | INFO     | telegram_sticker_manager:add_sticker_to_pack:237 | Added sticker to pack pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:27:53 | INFO     | telegram_sticker_manager:get_or_create_user_pack:287 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:29:17 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:29:17 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:29:31 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:29:32 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:29:32 | WARNING  | sticker_utils.utils:<module>:392 | rembg not installed, background removal will be limited
2025-06-04 16:29:32 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:29:32 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:29:32 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:29:32 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:29:32 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:29:32 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:29:38 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:29:38 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:29:56 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:29:58 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Собака -> A realistic, photorealistic rendering of a Golden Retriever puppy, approximately 6 months old, sitting upright, looking directly at the viewer with a playful expression.  The puppy is isolated on a pure white background, centered in the frame.  The fur should be highly detailed, showing individual strands, and the eyes bright and expressive.  The image should be optimized for a Telegram sticker, with a clear, sharp focus and a slightly exaggerated, yet still natural, expression to enhance its cuteness.
2025-06-04 16:29:58 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, photorealistic rendering of a Golden Retriever puppy, approximately 6 months old, sitti...
2025-06-04 16:29:58 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:30:01 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.72s
2025-06-04 16:30:02 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 16:30:02 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 216312 bytes
2025-06-04 16:30:02 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 120
2025-06-04 16:30:02 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 120 for user: 413686584
2025-06-04 16:30:02 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 120
2025-06-04 16:30:02 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 120
2025-06-04 16:30:03 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:30:06 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 120, User: 413686584
2025-06-04 16:30:06 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 16:30:07 | INFO     | telegram_sticker_manager:prepare_sticker_file:126 | Prepared sticker for Telegram: 216312 bytes
2025-06-04 16:30:07 | INFO     | telegram_sticker_manager:add_sticker_to_pack:237 | Added sticker to pack pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:30:07 | INFO     | telegram_sticker_manager:get_or_create_user_pack:287 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:34:44 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:34:44 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:35:10 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:35:11 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:35:11 | WARNING  | sticker_utils.utils:<module>:392 | rembg not installed, background removal will be limited
2025-06-04 16:35:11 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:35:12 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:35:12 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:35:12 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:35:12 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:35:12 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:35:18 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:35:18 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:35:38 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 16:35:39 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A photorealistic rendering of a cute piglet, approximately 6 months old,  with pink skin, short curly black bristles, and a slightly upturned snout.  The piglet is facing forward, looking directly at the viewer with playful eyes.  Isolated on a pure white background.  The image is sharply focused and centered, optimized for a Telegram sticker with vibrant, realistic colors and textures.
2025-06-04 16:35:39 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a cute piglet, approximately 6 months old,  with pink skin, short curl...
2025-06-04 16:35:39 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:35:42 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.21s
2025-06-04 16:35:44 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 16:35:44 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:35:44 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 250672 bytes
2025-06-04 16:35:44 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 121
2025-06-04 16:35:44 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 121 for user: 7945261060
2025-06-04 16:35:45 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 121
2025-06-04 16:35:45 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 121
2025-06-04 16:35:45 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:35:51 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 121, User: 7945261060
2025-06-04 16:35:51 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 7945261060, Requester: 7945261060
2025-06-04 16:35:52 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_7945261060_by_Voice_Stiker_Bot has 17 stickers before adding
2025-06-04 16:35:53 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 77246 bytes (WebP format)
2025-06-04 16:35:56 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot. Now has 18 stickers
2025-06-04 16:35:56 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 16:36:45 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:36:46 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A realistic, highly detailed rendering of a cute piglet,  pink skin with subtle shading and highlights, small perky ears, a tiny wet snout, and bright, expressive eyes.  The piglet is centered on a pure white background, isolated with no shadows or environment. The style should be photorealistic, emphasizing texture and fine detail suitable for a Telegram sticker.
2025-06-04 16:36:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed rendering of a cute piglet,  pink skin with subtle shading and highligh...
2025-06-04 16:36:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:36:48 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 3.69s
2025-06-04 16:36:49 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: top
2025-06-04 16:36:49 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:36:50 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 219330 bytes
2025-06-04 16:36:50 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 122
2025-06-04 16:36:50 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 122 for user: 413686584
2025-06-04 16:36:50 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 122
2025-06-04 16:36:50 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 122
2025-06-04 16:36:51 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:37:03 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 122, User: 413686584
2025-06-04 16:37:03 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 16:37:04 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 8 stickers before adding
2025-06-04 16:37:04 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 66728 bytes (WebP format)
2025-06-04 16:37:07 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_413686584_by_Voice_Stiker_Bot. Now has 9 stickers
2025-06-04 16:37:07 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:37:45 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:37:45 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:37:46 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A realistic illustration of a cute piglet, facing forward, isolated on a white background.  The piglet should have rosy cheeks, slightly curled tail, and expressive eyes.  The style should be photorealistic, with attention to detail in the fur texture and rendering of its wet snout.  The image should be centered and suitable for a Telegram sticker, approximately square in format.
2025-06-04 16:37:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic illustration of a cute piglet, facing forward, isolated on a white background.  The pigl...
2025-06-04 16:37:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:37:46 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A photorealistic rendering of a cute, pink piglet, looking directly at the camera with bright, curious eyes.  The piglet is isolated on a pure white background, centered in the frame, with soft, detailed fur and visible wrinkles around its snout. The lighting is soft and even, highlighting the piglet's texture.  The image is optimized for a Telegram sticker, with a clear and expressive composition.
2025-06-04 16:37:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a cute, pink piglet, looking directly at the camera with bright, curio...
2025-06-04 16:37:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:37:49 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.29s
2025-06-04 16:37:50 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 16:37:51 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 286099 bytes
2025-06-04 16:37:51 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 123
2025-06-04 16:37:51 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 123 for user: 413686584
2025-06-04 16:37:51 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 123
2025-06-04 16:37:51 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 123
2025-06-04 16:37:52 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 6.33s
2025-06-04 16:37:52 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 16:37:53 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 276471 bytes
2025-06-04 16:37:53 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 124
2025-06-04 16:37:53 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 124 for user: 413686584
2025-06-04 16:37:53 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 124
2025-06-04 16:37:53 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 124
2025-06-04 16:37:53 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:37:54 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:38:01 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 124, User: 413686584
2025-06-04 16:38:01 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 16:38:02 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 9 stickers before adding
2025-06-04 16:38:03 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 66066 bytes (WebP format)
2025-06-04 16:38:08 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_413686584_by_Voice_Stiker_Bot. Now has 10 stickers
2025-06-04 16:38:08 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:39:54 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:39:54 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:41:53 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:41:54 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:42:13 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:42:13 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:42:13 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:42:13 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:42:13 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:42:13 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:42:19 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:42:19 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:42:45 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:42:46 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A photorealistic rendering of a cute piglet, approximately 6 months old, with pink skin, floppy ears, and a slightly upturned snout.  The piglet is looking directly at the camera with a playful expression.  Isolated on a pure white background, centered in the frame.  High resolution, sharp focus,  lifelike details including individual hairs and subtle skin textures.  Suitable for a Telegram sticker.
2025-06-04 16:42:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a cute piglet, approximately 6 months old, with pink skin, floppy ears...
2025-06-04 16:42:46 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:43:49 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:43:49 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:43:57 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:43:58 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:43:59 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:43:59 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:43:59 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:43:59 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:43:59 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:43:59 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:44:05 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:44:05 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:44:16 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:44:17 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A photorealistic rendering of a cute piglet,  pink skin with subtle highlights and shadows, small, slightly curled tail,  perky ears, and bright, inquisitive eyes, looking directly at the viewer.  Isolated on a pure white background. The piglet should be centered in the frame,  with ample space around it, suitable for a Telegram sticker.
2025-06-04 16:44:17 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a cute piglet,  pink skin with subtle highlights and shadows, small, s...
2025-06-04 16:44:17 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:44:21 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.71s
2025-06-04 16:44:22 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антошка...' added to sticker at position: center
2025-06-04 16:44:22 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:44:40 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 16:44:40 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 168299 bytes
2025-06-04 16:44:40 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 125
2025-06-04 16:44:40 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 125 for user: 413686584
2025-06-04 16:44:41 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 125
2025-06-04 16:44:41 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 125
2025-06-04 16:44:41 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:44:49 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 125, User: 413686584
2025-06-04 16:44:49 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 16:44:50 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 10 stickers before adding
2025-06-04 16:44:51 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 73520 bytes (WebP format)
2025-06-04 16:44:54 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_413686584_by_Voice_Stiker_Bot. Now has 11 stickers
2025-06-04 16:44:54 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:45:32 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:45:33 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Кот -> A realistic, photorealistic rendering of a ginger tabby cat,  centered on a pure white background, isolated with no shadows or background elements. The cat should have expressive green eyes and be looking directly at the viewer.  The fur should be meticulously detailed, showing individual strands and texture.  The image should be optimized for a Telegram sticker, with a clean, sharp focus on the cat and a clear, expressive facial expression.
2025-06-04 16:45:33 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, photorealistic rendering of a ginger tabby cat,  centered on a pure white background, i...
2025-06-04 16:45:33 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:45:36 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.39s
2025-06-04 16:45:38 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Кака...' added to sticker at position: bottom
2025-06-04 16:45:38 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:45:39 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 16:45:39 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 248515 bytes
2025-06-04 16:45:39 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 126
2025-06-04 16:45:39 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 126 for user: 413686584
2025-06-04 16:45:39 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 126
2025-06-04 16:45:39 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 126
2025-06-04 16:45:40 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 16:45:47 | INFO     | bot_handlers:cb_add_to_sticker_pack:1049 | Adding sticker to pack - ID: 126, User: 413686584
2025-06-04 16:45:47 | INFO     | bot_handlers:cb_add_to_sticker_pack:1058 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 16:45:48 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 11 stickers before adding
2025-06-04 16:45:49 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 93326 bytes (WebP format)
2025-06-04 16:45:52 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_413686584_by_Voice_Stiker_Bot. Now has 12 stickers
2025-06-04 16:45:52 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:51:18 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:51:18 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:51:24 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:51:25 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:51:26 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:51:26 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:51:26 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:51:26 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:51:26 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:51:26 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:51:32 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:51:32 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:51:52 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 413686584
2025-06-04 16:51:53 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Котик -> A realistic, photorealistic rendering of a cute tabby kitten,  centered on a pure white background.  The kitten should be isolated with no background elements. The focus should be sharp, highlighting the kitten's fur texture and expressive eyes.  The pose should be endearing and slightly playful, suitable for a Telegram sticker.  The image should be optimized for clear visibility at small sizes.  The kitten should be a light to medium brown tabby with visible stripes.
2025-06-04 16:51:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, photorealistic rendering of a cute tabby kitten,  centered on a pure white background. ...
2025-06-04 16:51:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:51:56 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.19s
2025-06-04 16:51:57 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Еж...' added to sticker at position: bottom
2025-06-04 16:51:57 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:51:58 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 16:51:58 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 153606 bytes
2025-06-04 16:51:58 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 127
2025-06-04 16:51:58 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 127 for user: 413686584
2025-06-04 16:51:58 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 127
2025-06-04 16:51:58 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 127
2025-06-04 16:51:59 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 127
2025-06-04 16:51:59 | ERROR    | bot_handlers:generate_final_sticker:846 | Error generating sticker: Telegram server says - Bad Request: message can't be edited
2025-06-04 16:52:03 | INFO     | bot_handlers:cb_add_to_sticker_pack:1126 | Adding sticker to pack - ID: 127, User: 413686584
2025-06-04 16:52:03 | INFO     | bot_handlers:cb_add_to_sticker_pack:1135 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 16:52:04 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 12 stickers before adding
2025-06-04 16:52:05 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 62372 bytes (WebP format)
2025-06-04 16:52:08 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_413686584_by_Voice_Stiker_Bot. Now has 13 stickers
2025-06-04 16:52:08 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:52:08 | INFO     | bot_handlers:cb_add_to_sticker_pack:1126 | Adding sticker to pack - ID: 127, User: 413686584
2025-06-04 16:52:08 | INFO     | bot_handlers:cb_add_to_sticker_pack:1135 | Sticker found - Owner: 413686584, Requester: 413686584
2025-06-04 16:52:09 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 13 stickers before adding
2025-06-04 16:52:09 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 62372 bytes (WebP format)
2025-06-04 16:52:13 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_413686584_by_Voice_Stiker_Bot. Now has 14 stickers
2025-06-04 16:52:13 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 16:52:50 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 16:52:51 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A photorealistic rendering of a cute, pink piglet,  facing forward, with expressive eyes and slightly upturned snout.  The piglet is isolated on a pure white background, centered in the frame.  The fur should be meticulously detailed, showing individual strands of hair, with a slightly glossy sheen.  The image should be optimized for a Telegram sticker, ensuring clarity and high visual appeal.
2025-06-04 16:52:51 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A photorealistic rendering of a cute, pink piglet,  facing forward, with expressive eyes and slightl...
2025-06-04 16:52:51 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:52:54 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.02s
2025-06-04 16:52:56 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: top
2025-06-04 16:52:56 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:52:57 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 16:52:57 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 191086 bytes
2025-06-04 16:52:57 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 128
2025-06-04 16:52:57 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 128 for user: 7945261060
2025-06-04 16:52:58 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 128
2025-06-04 16:52:58 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 128
2025-06-04 16:52:59 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 128
2025-06-04 16:52:59 | ERROR    | bot_handlers:generate_final_sticker:846 | Error generating sticker: Telegram server says - Bad Request: message can't be edited
2025-06-04 16:57:52 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 16:57:52 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 16:57:58 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 16:58:00 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 16:58:00 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 16:58:01 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 16:58:01 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 16:58:01 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 16:58:01 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 16:58:01 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 16:58:07 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 16:58:07 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 16:58:32 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 16:58:33 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: свинка -> A realistic, highly detailed rendering of a cute piglet, facing forward, on a pure white background.  The piglet should be isolated, with no shadow or background elements.  The style should emphasize soft, slightly glossy skin, with visible individual hairs, and expressive, bright eyes. The piglet's snout should be slightly upturned, giving a cheerful expression. The image should be centered and optimized for sticker use, with sharp details and clear definition.
2025-06-04 16:58:33 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed rendering of a cute piglet, facing forward, on a pure white background....
2025-06-04 16:58:33 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 16:58:37 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.57s
2025-06-04 16:58:38 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 16:58:38 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 16:58:39 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 16:58:39 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 159347 bytes
2025-06-04 16:58:39 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 129
2025-06-04 16:58:39 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 129 for user: 7945261060
2025-06-04 16:58:39 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 129
2025-06-04 16:58:39 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 129
2025-06-04 16:58:40 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 129
2025-06-04 16:58:40 | ERROR    | bot_handlers:generate_final_sticker:848 | Error generating sticker: Telegram server says - Bad Request: message can't be edited
2025-06-04 16:58:51 | INFO     | bot_handlers:cb_add_to_sticker_pack:1128 | Adding sticker to pack - ID: 129, User: 7945261060
2025-06-04 16:58:51 | INFO     | bot_handlers:cb_add_to_sticker_pack:1137 | Sticker found - Owner: 7945261060, Requester: 7945261060
2025-06-04 16:58:52 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_7945261060_by_Voice_Stiker_Bot has 18 stickers before adding
2025-06-04 16:58:53 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 76014 bytes (WebP format)
2025-06-04 16:58:56 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_7945261060_by_Voice_Stiker_Bot. Now has 19 stickers
2025-06-04 16:58:56 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_7945261060_by_Voice_Stiker_Bot
2025-06-04 17:02:28 | INFO     | bot_handlers:generate_final_sticker:655 | Generating sticker for user_id: 7945261060
2025-06-04 17:02:30 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A realistic, photorealistic rendering of a cute piglet, isolated on a pure white background.  The piglet should be centered, facing slightly towards the viewer, with its ears slightly forward.  Focus should be sharp, with highly detailed fur and skin texture visible.  The piglet should have a friendly, slightly mischievous expression.  The image should be optimized for Telegram sticker use, with a clear, expressive composition suitable for a small square format.
2025-06-04 17:02:30 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, photorealistic rendering of a cute piglet, isolated on a pure white background.  The pi...
2025-06-04 17:02:30 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 17:02:58 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 29.43s
2025-06-04 17:03:00 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 17:03:00 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 17:03:00 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 17:03:01 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 185595 bytes
2025-06-04 17:03:01 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 130
2025-06-04 17:03:01 | INFO     | bot_handlers:generate_final_sticker:721 | Sticker saved with ID: 130 for user: 7945261060
2025-06-04 17:03:01 | INFO     | bot_handlers:generate_final_sticker:747 | Sending sticker with ID: 130
2025-06-04 17:03:01 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 130
2025-06-04 17:03:02 | INFO     | bot_handlers:create_sticker_actions_keyboard:77 | Creating keyboard for sticker ID: 130
2025-06-04 17:03:02 | ERROR    | bot_handlers:generate_final_sticker:848 | Error generating sticker: Telegram server says - Bad Request: message can't be edited
2025-06-04 17:03:08 | INFO     | bot_handlers:cb_add_to_sticker_pack:1128 | Adding sticker to pack - ID: 130, User: 7945261060
2025-06-04 17:03:08 | INFO     | bot_handlers:cb_add_to_sticker_pack:1137 | Sticker found - Owner: 7945261060, Requester: 7945261060
2025-06-04 17:03:09 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_7945261060_by_Voice_Stiker_Bot has 19 stickers before adding
2025-06-04 17:03:10 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 75696 bytes (WebP format)
2025-06-04 17:03:10 | ERROR    | telegram_sticker_manager:add_sticker_to_pack:246 | Telegram error adding sticker: Telegram server says - Bad Request: STICKERSET_INVALID
2025-06-04 17:19:57 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 17:19:57 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 17:20:03 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 17:20:05 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 17:20:06 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 17:20:06 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 17:20:06 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 17:20:06 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 17:20:06 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 17:20:06 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 17:20:12 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 17:20:12 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 17:20:33 | INFO     | bot_handlers:generate_final_sticker:585 | Generating sticker for user_id: 7945261060
2025-06-04 17:20:35 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A realistic, highly detailed rendering of a piglet, approximately 8 weeks old, pink skin with subtle shading and highlights, small curled tail, slightly wet snout, looking directly at the viewer with curious eyes, isolated on a pure white background.  The piglet should be centered in the frame, with ample space around it for sticker use.  Focus on creating a cute and expressive face.  The style should evoke a soft, almost photorealistic quality with a slightly muted color palette.
2025-06-04 17:20:35 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed rendering of a piglet, approximately 8 weeks old, pink skin with subtle...
2025-06-04 17:20:35 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 17:20:38 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 5.00s
2025-06-04 17:20:39 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 17:20:39 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 17:20:40 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 17:20:41 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 136332 bytes
2025-06-04 17:20:41 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 131
2025-06-04 17:20:41 | INFO     | bot_handlers:generate_final_sticker:643 | Sticker saved with ID: 131 for user: 7945261060
2025-06-04 17:20:41 | INFO     | bot_handlers:generate_final_sticker:664 | Sending sticker with ID: 131
2025-06-04 17:20:41 | INFO     | bot_handlers:create_sticker_actions_keyboard:76 | Creating keyboard for sticker ID: 131
2025-06-04 17:20:41 | INFO     | bot_handlers:create_sticker_actions_keyboard:76 | Creating keyboard for sticker ID: 131
2025-06-04 17:20:41 | ERROR    | bot_handlers:generate_final_sticker:752 | Error generating sticker: Telegram server says - Bad Request: message can't be edited
2025-06-04 17:20:46 | INFO     | bot_handlers:cb_add_to_sticker_pack:1008 | Adding sticker to pack - ID: 131, User: 7945261060
2025-06-04 17:20:46 | INFO     | bot_handlers:cb_add_to_sticker_pack:1016 | Sticker found - Owner: 7945261060, Requester: 7945261060
2025-06-04 17:20:50 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 73276 bytes (WebP format)
2025-06-04 17:20:52 | INFO     | telegram_sticker_manager:create_sticker_pack:166 | Successfully created pack vladislav_stickers_by_Voice_Stiker_Bot with 1 stickers
2025-06-04 17:37:36 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 17:37:36 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 17:37:41 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 17:37:43 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 17:37:43 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 17:37:44 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 17:37:44 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 17:37:44 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 17:37:44 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 17:37:44 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 17:37:50 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 17:37:50 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 17:40:52 | INFO     | bot_handlers:generate_final_sticker:657 | Generating sticker for user_id: 413686584
2025-06-04 17:40:53 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Бургер -> A juicy, realistic-style hamburger sticker on a pure white background.  The burger should be perfectly centered, sharply focused, and feature a sesame seed bun, slightly melted cheddar cheese, crisp lettuce, a ripe tomato slice, and a thick, flavorful beef patty with visible browning.  Isolated object, no shadows or background elements.  The style should be photorealistic, emphasizing textures and details for a mouthwatering effect.
2025-06-04 17:40:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A juicy, realistic-style hamburger sticker on a pure white background.  The burger should be perfect...
2025-06-04 17:40:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 17:40:57 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.37s
2025-06-04 17:40:58 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 17:40:58 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 17:40:58 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 17:40:59 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 150736 bytes
2025-06-04 17:40:59 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 132
2025-06-04 17:40:59 | INFO     | bot_handlers:generate_final_sticker:722 | Sticker saved with ID: 132 for user: 413686584
2025-06-04 17:40:59 | INFO     | bot_handlers:generate_final_sticker:749 | Sending sticker with ID: 132
2025-06-04 17:41:00 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 14 stickers before adding
2025-06-04 17:41:01 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 62012 bytes (WebP format)
2025-06-04 17:41:04 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_413686584_by_Voice_Stiker_Bot. Now has 15 stickers
2025-06-04 17:41:04 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 17:41:04 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 17:41:49 | INFO     | bot_handlers:generate_final_sticker:657 | Generating sticker for user_id: 413686584
2025-06-04 17:41:51 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A realistic illustration of a cute piglet, approximately 6 months old, with pink skin, floppy ears, and a slightly curly tail.  The piglet is looking directly at the camera with a playful expression.  Isolated on a pure white background, centered in the frame.  High-resolution, detailed rendering emphasizing soft fur texture and subtle highlights to enhance the three-dimensional effect.  Suitable for a Telegram sticker.
2025-06-04 17:41:51 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic illustration of a cute piglet, approximately 6 months old, with pink skin, floppy ears, ...
2025-06-04 17:41:51 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 17:41:53 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 3.43s
2025-06-04 17:41:54 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: bottom
2025-06-04 17:41:54 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 17:41:55 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 17:41:55 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 180460 bytes
2025-06-04 17:41:55 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 133
2025-06-04 17:41:55 | INFO     | bot_handlers:generate_final_sticker:722 | Sticker saved with ID: 133 for user: 413686584
2025-06-04 17:41:56 | INFO     | bot_handlers:generate_final_sticker:749 | Sending sticker with ID: 133
2025-06-04 17:41:57 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 15 stickers before adding
2025-06-04 17:41:57 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 76576 bytes (WebP format)
2025-06-04 17:42:00 | INFO     | telegram_sticker_manager:add_sticker_to_pack:236 | Successfully added sticker to pack pack1_413686584_by_Voice_Stiker_Bot. Now has 16 stickers
2025-06-04 17:42:00 | INFO     | telegram_sticker_manager:get_or_create_user_pack:292 | Added sticker to existing pack: pack1_413686584_by_Voice_Stiker_Bot
2025-06-04 17:42:01 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 17:44:41 | INFO     | bot_handlers:generate_final_sticker:657 | Generating sticker for user_id: 413686584
2025-06-04 17:44:42 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Робот -> A realistic, highly detailed rendering of a friendly, rusty industrial robot, isolated on a pure white background. The robot should be centered, expressive with visible personality in its pose and facial features (if applicable), and suitable for use as a Telegram sticker.  Focus on clear, sharp details and textures, emphasizing the metallic surfaces and wear-and-tear.  The style should evoke a vintage industrial aesthetic.
2025-06-04 17:44:42 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed rendering of a friendly, rusty industrial robot, isolated on a pure whi...
2025-06-04 17:44:42 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 17:45:06 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 24.50s
2025-06-04 17:45:07 | INFO     | sticker_utils.utils:add_text_to_sticker:137 | Text 'Антон...' added to sticker at position: top
2025-06-04 17:45:07 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: True
2025-06-04 17:45:08 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 17:45:08 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 143648 bytes
2025-06-04 17:45:08 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 134
2025-06-04 17:45:08 | INFO     | bot_handlers:generate_final_sticker:722 | Sticker saved with ID: 134 for user: 413686584
2025-06-04 17:45:09 | INFO     | bot_handlers:generate_final_sticker:749 | Sending sticker with ID: 134
2025-06-04 17:45:10 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 16 stickers before adding
2025-06-04 17:45:11 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 72280 bytes (WebP format)
2025-06-04 17:45:11 | ERROR    | telegram_sticker_manager:add_sticker_to_pack:246 | Telegram error adding sticker: Telegram server says - Bad Request: STICKERSET_INVALID
2025-06-04 17:45:12 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 16 stickers before adding
2025-06-04 17:45:13 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 72280 bytes (WebP format)
2025-06-04 17:45:13 | ERROR    | telegram_sticker_manager:add_sticker_to_pack:246 | Telegram error adding sticker: Telegram server says - Bad Request: STICKERSET_INVALID
2025-06-04 17:45:13 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 17:45:58 | INFO     | bot_handlers:generate_final_sticker:657 | Generating sticker for user_id: 413686584
2025-06-04 17:45:59 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Кошка -> A realistic, photorealistic depiction of a fluffy ginger tabby cat, sitting upright and looking directly at the viewer with bright, expressive green eyes.  The cat is isolated on a pure white background, centered in the frame, with sharp focus and high detail. The fur should be meticulously rendered, showing individual strands and textures.  The expression should be subtly playful and curious.  Optimized for Telegram sticker format.
2025-06-04 17:45:59 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, photorealistic depiction of a fluffy ginger tabby cat, sitting upright and looking dire...
2025-06-04 17:45:59 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 17:46:02 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 3.78s
2025-06-04 17:46:03 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 17:46:03 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 17:46:04 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 123432 bytes
2025-06-04 17:46:04 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 135
2025-06-04 17:46:04 | INFO     | bot_handlers:generate_final_sticker:722 | Sticker saved with ID: 135 for user: 413686584
2025-06-04 17:46:04 | INFO     | bot_handlers:generate_final_sticker:749 | Sending sticker with ID: 135
2025-06-04 17:46:05 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 16 stickers before adding
2025-06-04 17:46:06 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 64552 bytes (WebP format)
2025-06-04 17:46:06 | ERROR    | telegram_sticker_manager:add_sticker_to_pack:246 | Telegram error adding sticker: Telegram server says - Bad Request: STICKERSET_INVALID
2025-06-04 17:46:06 | INFO     | telegram_sticker_manager:add_sticker_to_pack:202 | Pack pack1_413686584_by_Voice_Stiker_Bot has 16 stickers before adding
2025-06-04 17:46:07 | INFO     | telegram_sticker_manager:prepare_sticker_file:111 | Prepared sticker for Telegram: 64552 bytes (WebP format)
2025-06-04 17:46:07 | ERROR    | telegram_sticker_manager:add_sticker_to_pack:246 | Telegram error adding sticker: Telegram server says - Bad Request: STICKERSET_INVALID
2025-06-04 17:46:07 | INFO     | logger:log_user_action:69 | User action: sticker_created
2025-06-04 18:17:10 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 18:17:10 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 18:17:16 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 18:17:17 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 18:17:18 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 18:17:18 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 18:17:18 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 18:17:18 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 18:17:18 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 18:17:18 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 18:17:24 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 18:17:24 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 18:18:12 | INFO     | bot_handlers:generate_final_sticker:1226 | Generating sticker for user_id: 7945261060
2025-06-04 18:18:13 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: котик -> A realistic, photorealistic rendering of a cute, fluffy kitten, light grey in color with bright blue eyes, sitting on a pure white background. The kitten is centered in the frame, looking directly at the viewer with a slightly playful expression.  The fur is meticulously detailed, showing individual strands and subtle highlights.  The image is sharply focused, isolated on the white background with no shadows or environment. Optimized for Telegram sticker format, with a clear, expressive and adorable pose.
2025-06-04 18:18:13 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, photorealistic rendering of a cute, fluffy kitten, light grey in color with bright blue...
2025-06-04 18:18:13 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 18:18:17 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.55s
2025-06-04 18:18:17 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 18:18:18 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 18:18:18 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 212745 bytes
2025-06-04 18:18:18 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 136
2025-06-04 18:18:18 | INFO     | bot_handlers:generate_final_sticker:1291 | Sticker saved with ID: 136 for user: 7945261060
2025-06-04 18:18:19 | INFO     | bot_handlers:generate_final_sticker:1319 | Sending sticker with ID: 136
2025-06-04 18:18:19 | ERROR    | bot_handlers:generate_final_sticker:1475 | Error auto-adding to pack: module 'db_manager' has no attribute 'get_user_packs'
2025-06-04 18:18:26 | INFO     | bot_handlers:cb_add_to_sticker_pack:1890 | Adding sticker to pack - ID: 136, User: 7945261060
2025-06-04 18:18:26 | ERROR    | bot_handlers:cb_add_to_sticker_pack:2075 | Error in add_to_sticker_pack: module 'db_manager' has no attribute 'get_user_packs'
2025-06-04 18:25:19 | INFO     | __main__:on_shutdown:41 | Остановка бота...
2025-06-04 18:25:19 | INFO     | __main__:on_shutdown:45 | Бот остановлен
2025-06-04 18:25:26 | INFO     | db_manager.manager:__init__:19 | Инициализация базы данных: /Users/cooldom/VoiceSticker/bot_database.db
2025-06-04 18:25:27 | INFO     | stt_service.service:__init__:52 | Инициализация STT сервиса с Whisper
2025-06-04 18:25:28 | INFO     | __main__:main:88 | Запуск в режиме polling (разработка)
2025-06-04 18:25:28 | INFO     | __main__:on_startup:25 | Запуск бота VoiceSticker...
2025-06-04 18:25:28 | INFO     | __main__:on_startup:28 | Инициализация базы данных...
2025-06-04 18:25:28 | INFO     | db_manager.manager:init_db:193 | База данных успешно инициализирована
2025-06-04 18:25:28 | INFO     | __main__:on_startup:32 | Инициализация сервисов...
2025-06-04 18:25:28 | INFO     | stt_service.service:initialize:63 | Загружаем Whisper модель 'medium'...
2025-06-04 18:25:34 | INFO     | stt_service.service:initialize:73 | Whisper модель 'medium' успешно загружена!
2025-06-04 18:25:34 | INFO     | __main__:on_startup:36 | ✅ Бот успешно запущен!
2025-06-04 18:26:35 | INFO     | bot_handlers:generate_final_sticker:1236 | Generating sticker for user_id: 7945261060
2025-06-04 18:26:37 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: свинка -> A realistic, highly detailed rendering of a piglet, approximately 6-8 weeks old,  on a pure white background. The piglet should be centered, occupying most of the frame, and have a slightly playful, curious expression.  Focus on rendering the fine details of its skin texture, including individual hairs and subtle shading to emphasize its roundness and softness.  The piglet should be isolated, with no shadows or background elements.  The overall style should be photorealistic, aiming for a high level of clarity and visual appeal suitable for a Telegram sticker.
2025-06-04 18:26:37 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed rendering of a piglet, approximately 6-8 weeks old,  on a pure white ba...
2025-06-04 18:26:37 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 18:26:40 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.81s
2025-06-04 18:26:41 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 18:26:42 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 18:26:42 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 171900 bytes
2025-06-04 18:26:42 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 137
2025-06-04 18:26:42 | INFO     | bot_handlers:generate_final_sticker:1301 | Sticker saved with ID: 137 for user: 7945261060
2025-06-04 18:26:42 | INFO     | bot_handlers:generate_final_sticker:1328 | Sending sticker with ID: 137
2025-06-04 18:26:43 | ERROR    | bot_handlers:generate_final_sticker:1485 | Error auto-adding to pack: module 'db_manager' has no attribute 'get_user_packs'
2025-06-04 18:26:48 | INFO     | bot_handlers:cb_add_to_sticker_pack:1885 | Adding sticker to pack - ID: 137, User: 7945261060
2025-06-04 18:26:49 | ERROR    | bot_handlers:cb_add_to_sticker_pack:2069 | Error in add_to_sticker_pack: module 'db_manager' has no attribute 'get_user_packs'
2025-06-04 18:27:15 | INFO     | bot_handlers:cb_add_to_sticker_pack:1885 | Adding sticker to pack - ID: 137, User: 7945261060
2025-06-04 18:27:15 | ERROR    | bot_handlers:cb_add_to_sticker_pack:2069 | Error in add_to_sticker_pack: module 'db_manager' has no attribute 'get_user_packs'
2025-06-04 18:36:37 | INFO     | bot_handlers:cb_add_to_sticker_pack:1885 | Adding sticker to pack - ID: 137, User: 7945261060
2025-06-04 18:36:37 | ERROR    | bot_handlers:cb_add_to_sticker_pack:2069 | Error in add_to_sticker_pack: module 'db_manager' has no attribute 'get_user_packs'
2025-06-04 18:37:09 | INFO     | bot_handlers:generate_final_sticker:1236 | Generating sticker for user_id: 413686584
2025-06-04 18:37:10 | INFO     | image_generation_service.service:_enhance_with_gemini:212 | Gemini enhanced: Свинка -> A realistic, highly detailed rendering of a piglet, approximately 8 weeks old,  on a pure white background. The piglet should be centered, facing slightly to the viewer's left, with its ears perked up and showing a playful expression.  Focus on realistic fur texture, including individual hairs, and highlight the pink skin tones and wet snout.  The image should be isolated with a clean white background, suitable for a Telegram sticker, exhibiting a clear, expressive and charming pose.
2025-06-04 18:37:10 | INFO     | image_generation_service.service:generate_sticker_with_validation:268 | Generating with sticker-maker: A realistic, highly detailed rendering of a piglet, approximately 8 weeks old,  on a pure white back...
2025-06-04 18:37:10 | INFO     | image_generation_service.service:generate_sticker_with_validation:269 | Style: realistic, Background needed: False
2025-06-04 18:37:13 | INFO     | image_generation_service.service:generate_sticker_with_validation:303 | Successfully generated sticker in 4.26s
2025-06-04 18:37:14 | INFO     | sticker_utils.utils:process_sticker:296 | Sticker processed successfully, size: (512, 512), text: False
2025-06-04 18:37:15 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:407 | Background removed using rembg
2025-06-04 18:37:15 | INFO     | sticker_utils.utils:prepare_sticker_for_telegram:438 | Prepared sticker for Telegram: 152216 bytes
2025-06-04 18:37:15 | INFO     | db_manager.manager:save_sticker:352 | Saved sticker with ID: 138
2025-06-04 18:37:15 | INFO     | bot_handlers:generate_final_sticker:1301 | Sticker saved with ID: 138 for user: 413686584
2025-06-04 18:37:15 | INFO     | bot_handlers:generate_final_sticker:1328 | Sending sticker with ID: 138
2025-06-04 18:37:16 | ERROR    | bot_handlers:generate_final_sticker:1485 | Error auto-adding to pack: module 'db_manager' has no attribute 'get_user_packs'
2025-06-04 18:37:34 | INFO     | bot_handlers:cb_add_to_sticker_pack:1885 | Adding sticker to pack - ID: 138, User: 413686584
2025-06-04 18:37:34 | ERROR    | bot_handlers:cb_add_to_sticker_pack:2069 | Error in add_to_sticker_pack: module 'db_manager' has no attribute 'get_user_packs'
